<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.79.0" /><link rel="alternate" type="application/rss&#43;xml" href="/tools/safetyweaver/index.xml">
<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>SafetyWeaver | Universal Safety Format</title><meta property="og:title" content="SafetyWeaver" />
<meta property="og:description" content="An MPS-based USF weaving tool
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/tools/safetyweaver/" />

<meta itemprop="name" content="SafetyWeaver">
<meta itemprop="description" content="An MPS-based USF weaving tool
">
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="SafetyWeaver"/>
<meta name="twitter:description" content="An MPS-based USF weaving tool
"/>







<link rel="preload" href="/scss/main.min.7822b7c057b4a810809dabf336eddb9515f800a3275417dc6ae2da2d35a0d1d1.css" as="style">
<link href="/scss/main.min.7822b7c057b4a810809dabf336eddb9515f800a3275417dc6ae2da2d35a0d1d1.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>




  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"><svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" viewBox="-53 -53 106 116"><title>['gyronny of ten azure and argent ']</title><desc>This is an SVG of a blazon, a heraldic description of a shield. It was generated with pyBlazon, by Mark Shoulson and Arnt Richard Johansen</desc><mask id="Clip0001"><g fill="#fff"><path d="M-50-50v36C-50 46 0 60 0 60S50 46 50-14V-50z" id="ClipPath0002"/></g></mask><path stroke="#000" stroke-width="1" d="M-50-50v36C-50 46 0 60 0 60S50 46 50-14V-50z" fill="none"/><defs/><g mask="url(#Clip0001)"><g><rect y="-50" width="100" fill="blue" x="-50" height="110"/><svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" height="110" width="100" y="-50" x="-50" viewBox="-50 -50 100 110"><mask id="Clip0003"><g fill="#fff"><path id="ClipPath0004" d="M673533494602e-26 110 0 0-64.6563777522 88.9918693812zM-104.616216792 33.9918693812.0.0-104.616216792-33.9918693812zM-64.6563777522-88.9918693812.0.0-202060048381e-25-110zm129.3127555044.0L0 0 104.616216792-33.9918693812zM104.616216792 33.9918693812.0.0 64.6563777522 88.9918693812z" fill-rule="evenodd"/></g></mask><defs/><g mask="url(#Clip0003)"><rect y="-50" width="100" fill="#fff" x="-50" height="110"/></g></svg></g></g></svg></span><span class="text-uppercase font-weight-bold">Universal Safety Format</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/introduction/" ><span>Introduction</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/concepts/" ><span>Concepts</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="/tools/" ><span class="active">Tools</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center">
    

    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/tools/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Tools</a>
  </li>
  <ul>
    <li class="collapse show" id="tools">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/tools/safetymodeler/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">SafetyModeler</a>
  </li>
  <ul>
    <li class="collapse " id="toolssafetymodeler">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/tools/safetymodeler/installation/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Installation</a>
  </li>
  <ul>
    <li class="collapse " id="toolssafetymodelerinstallation">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/tools/safetymodeler/editor_ui/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Editor UI</a>
  </li>
  <ul>
    <li class="collapse " id="toolssafetymodelereditor_ui">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/tools/safetymodeler/getting_started/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Getting Started</a>
  </li>
  <ul>
    <li class="collapse " id="toolssafetymodelergetting_started">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/tools/safetymodeler/import_models/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Import Models</a>
  </li>
  <ul>
    <li class="collapse " id="toolssafetymodelerimport_models">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/tools/safetymodeler/troubleshooting/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Troubleshooting</a>
  </li>
  <ul>
    <li class="collapse " id="toolssafetymodelertroubleshooting">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/tools/safetyweaver/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">SafetyWeaver</a>
  </li>
  <ul>
    <li class="collapse show" id="toolssafetyweaver">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/tools/taskleveldesigntool/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">TaskLevelDesignTool</a>
  </li>
  <ul>
    <li class="collapse " id="toolstaskleveldesigntool">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/tools/usf4cpp/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">USF4CPP</a>
  </li>
  <ul>
    <li class="collapse " id="toolsusf4cpp">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            
  
  
  
  
  
  <div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
  
  
  </div>





<nav id="TableOfContents">
  <ul>
    <li><a href="#welcome-to-safetyweaver">Welcome to SafetyWeaver</a></li>
    <li><a href="#applying-safety-mechanisms-to-c-code">Applying Safety Mechanisms to C-Code</a></li>
    <li><a href="#specifying-implementation-details">Specifying Implementation Details</a></li>
    <li><a href="#defining-safety-mechanisms-as-transformation-scripts">Defining Safety Mechanisms as Transformation Scripts</a></li>
    <li><a href="#a-catalogue-of-safety-mechanisms">A Catalogue of Safety Mechanisms</a></li>
    <li><a href="#future-extensions">Future Extensions</a></li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		







<li class="breadcrumb-item" >
	<a href="/tools/">Tools</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="/tools/safetyweaver/">SafetyWeaver</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>SafetyWeaver</h1>
        <div class="lead">An MPS-based USF weaving tool</div>
	
	<h2 id="welcome-to-safetyweaver">Welcome to SafetyWeaver</h2>
<p>USF allows to create libraries of functional safety mechanisms, e.g., for applying DMR, TMR or Watchdog mechanisms. These mechanisms are defined as model-to-model transformation scripts, using the definitions of the USF metamodel (blocks, ports, control flow, etc.). The transformation language is designed such that the mechanisms can be applied on the model level and on the code level. More details on the USF transformation language (UTL) can be found in section <a href="/concepts/transformations"><em>USF Transformations</em></a>.</p>
<p>Examples for model-level applications include domain-specific models like SysML hierarchical structures, AUTOSAR components or proprietary component-style architecture models. The main target for the code-level application of safety mechanisms currently is the C programming language. Many safety-critical systems are using C as their implementation language.</p>
<p><img src="SafetyWeaver_Screenshot1.png" alt="SafetyWeaver in action" title="SafetyWeaver in action"></p>
<p>SafetyWeaver is a tool for the application of safety mechanisms, i.e., for executing USF transformation scripts on different domain-specific models or code. The SafetyWeaver tool is based on the tool platform <a href="https://www.jetbrains.com/mps/">MPS</a>, provided by JetBrains as open-source tooling. Additionally, SafetyWeaver uses the <a href="http://mbeddr.com">mbeddr</a> open-source project, which is an extensible C IDE. SafetyWeaver is being developed by the German company <a href="https://www.itemis.com/en/it-services/methods-and-tools/">itemis</a>. Please contact <a href="mailto:klaus.birken@itemis.de">klaus.birken@itemis.de</a> for further information and demo or evaluation requests.</p>
<h2 id="applying-safety-mechanisms-to-c-code">Applying Safety Mechanisms to C-Code</h2>
<p>In order to apply safety mechanisms to C-code, the code has to be developed using the mbeddr C IDE or imported as textual C files into mbeddr. In mbeddr’s C editor, code can be annotated in two ways:</p>
<ul>
<li><em>Markers</em> can be added to indicate special locations in the code.</li>
<li><em>Applicators</em> can be added to code blocks, in order to specify which safety mechanism should be applied and which information should be used by the transformation.</li>
</ul>
<p>Usually, both annotation types will be combined: The parameters of an applicator often specify locations in the code by referring to markers.</p>
<p>The following screenshot shows a while-loop of C-Code and an annotation which specifies that the APPLY_WATCHDOG2 mechanism should be applied. It uses two markers (<code>InitWD</code> and <code>PetWD</code>) to specify location in the C-code. Two additional parameters (<code>implInit</code> and <code>implTrigger</code>) specify C-domain-specific code snippets, which have been defined using SafetyWeaver’s code block editor (see next section).</p>
<p><img src="CodeWithAnnotation.png" alt="Annotated C-code" title="Annotated C-code"></p>
<p>Each applicator or all applicators in a C module can be executed interactively by triggering a context menu action (actually, in MPS these context-specific actions are called intentions). In a production environment, applicators will be executed in batch mode during a build process (e.g., with Maven or Gradle).</p>
<p>If the applicator in the previous diagram is executed, the resulting code looks like the following:</p>
<p><img src="CodeAfterWeaving.png" alt="C-code after weaving" title="C-code after weaving"></p>
<p>At the relevant locations in the C module, code has been introduced. SafetyWeaver will also take into account required dependencies, e.g., <code>#define</code> statements on module level or additional <code>#include</code> statements. In this simple example, this is quite straightforward. In more complex examples, the control flow of the C code might be altered, which requires more complex restructuring and optimizations.</p>
<p>Note that SafetyWeaver provides some traceability for the adapted code sections: The safety mechanism which has been applied is still referenced and the materialized code blocks are documented. This traceability information can be extended depending on the specific workflow requirements. It would be also possible to generate a report which specifies which transformations have been applied.</p>
<h2 id="specifying-implementation-details">Specifying Implementation Details</h2>
<p>In order to specify transformations without any references to domain-specific details, it must be possible to specify these domain-specific details in an extra editor. For the domain of C code, SafetyWeaver provides a code block editor. The following screenshot shows an example configuration consisting of two code blocks which are needed for the watchdog example discussed previously.</p>
<p><img src="CodeBlockEditor.png" alt="Editor for C-code blocks" title="Editor for C-code blocks"></p>
<p>The interface for each code block is defined by referencing an USF blocktype. Usually, this blocktype is provided as part of the safety mechanism definition (see next section). Comments which have been added to the USF blocktype definition are shown in the code block editor. This helps the user to understand what functionality should be implemented by the code snippet.
The control flow ports of the block type represent entry and exit points for the code block. The data flow ports of the block type represent read-only variables (for input ports) and write-only variables (for output ports). The code block editor of SafetyWeaver will enforce these restrictions and show error markers if the code snippet doesn’t comply to the block type definition.</p>
<p>On the left side of the code block editor, it is possible to specify additional dependencies, i.e., necessary included headers (<em>imports</em> section) and needed global constants (<em>globals</em> section).</p>
<h2 id="defining-safety-mechanisms-as-transformation-scripts">Defining Safety Mechanisms as Transformation Scripts</h2>
<p>In addition to the application of safety mechanisms to C code and other types of artefacts, SafetyWeaver supports the specification of those safety mechanisms. This can be done by using the editor for the transformation language. The following screenshot shows the implementation of a watchdog safety mechanism.</p>
<p><img src="WatchdogTransformation.png" alt="USF transformation for watchdog mechanism" title="USF transformation for watchdog mechanism"></p>
<p>The implementation may contain USF block type definitions (<code>TriggerWatchdog</code> in the example). This is an elegant means to specify the transformation’s API, but also to use it as a blueprint for constructing new block types. During the construction of new block types, it is possible to provide domain-specific details (see the previous section ‘Specifying Implementation Details’).</p>
<h2 id="a-catalogue-of-safety-mechanisms">A Catalogue of Safety Mechanisms</h2>
<p>SafetyWeaver currently already supports a library of different safety mechanisms, as shown by the following table:</p>
<p><img src="ImplementedMechanisms.png" alt="Safety mechanisms implemented by SafetyWeaver" title="Mechanisms implemented by SafetyWeaver"></p>
<p>We plan to extend this library continuously by adding new transformation scripts (table rows) and also adding new target domains (columns).</p>
<h2 id="future-extensions">Future Extensions</h2>
<p>Although the first release of SafetyWeaver is already available for evaluation purposes, there is a roadmap of future extensions. This roadmap includes the following features:</p>
<ul>
<li>support weaving for real-world, component-based domain models, e.g., SysML v2 or AUTOSAR</li>
<li>enhance library of safety mechanisms aka transformation scripts</li>
<li>support latest extensions of USF, e.g., hardware deployment</li>
</ul>
<p>The last feature (hardware deployment) would allow to specify safety mechanisms which use hardware resources. One example of this is the mapping of redundant control flows onto different cores, thus enforcing hardware redundancy. Another example would be the implementation of watchdogs by using hardware timers.</p>

        <div class="section-index">
    
    
    
    
    
    <hr class="panel-line">
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
</div>

	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified June 8, 2021</div>
</div>

          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2021 SAFE4I Consortium. All Rights Reserved.</small>
        
        <small class="ml-1"><br/><a href="/legal_notice/index.html" >Legal Notice (Impressum)</a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>


<script src="https://cdn.jsdelivr.net/npm/mermaid@8.8.1/dist/mermaid.min.js" integrity="sha384-to2w0I1OqmbJ9J6yTnIX+KYU8grNpZoD1dKPLjgEJvMe5L5+/7qvuNa2sQo8WAWj" crossorigin="anonymous"></script>










<script src="/js/main.min.60ce8ede033634e2c17e595d9af980be5f56cfdafe34f9893a45ab03f34574c6.js" integrity="sha256-YM6O3gM2NOLBflldmvmAvl9Wz9r&#43;NPmJOkWrA/NFdMY=" crossorigin="anonymous"></script>




  </body>
</html>